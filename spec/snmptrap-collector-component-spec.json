{
        "self": {
                "version": "1.4.0",
                "name": "snmptrap-collector",
                "description": "Collector for receiving SNMP traps and publishing to DMAAP/MR",
                "component_type": "docker"
        },
        "streams": {
                "subscribes": [

                ],
                "publishes": [
                        {
                                "format": "snmptrap_output",
                                "version": "1.3.0",
                                "type": "message router",
                                "config_key": "snmp_trap"
                        }
                ]
        },
        "services": {
                "calls": [],
                "provides": []
        },
        "parameters": [
                    {
                        "name": "sw_interval_in_seconds",
                        "value": "60",
                        "description": "StormWatch sample interval",
                        "designer_editable" : false,
                        "policy_editable" : false,
                        "sourced_at_deployment" : false
                    },
                    {
                        "name": "StormWatchPolicy",
                        "description": "Configure storm watch control parameters via Policy",
                        "sourced_at_deployment": false,
                        "designer_editable": true,
                        "policy_editable": true,
                        "policy_group": "DCAE.Config_StormWatch",
                        "policy_schema": [
                            {
                                "name": "sw_trap_config",
                                "description": "List of storm watch control rules",
                                "type": "list",
                                "entry_schema": [
                                    {
                                        "name": "sw_notify_oid",
                                        "description": "Stormwatch notify oid",
                                        "type": "string",
                                        "value": ""
                                    },
                                    {
                                        "name": "sw_high_water_in_interval",
                                        "description": "Onset number of traps in interval",
                                        "type": "string",
                                        "value": ""
                                    },
                                    {
                                        "name": "sw_low_water_in_interval",
                                        "description": "Clearing number of traps in interval",
                                        "type": "string",
                                        "value": ""
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Protocols",
                        "description": "Protocol parameters",
                        "sourced_at_deployment": false,
                        "designer_editable": false,
                        "policy_editable": false,
                        "value": [
                            {
                                "name": "ipv4_interface",
                                "description": "ipv4 address trap receiver should listen to (0.0.0.0 -> all)",
                                "value": "0.0.0.0"
                            },
                            {
                                "name": "ipv4_port",
                                "description": "port trap receiver should bind to for ipv4 traps",
                                "value": "162"
                            },
                            {
                                "name": "ipv6_interface",
                                "description": "ipv6 address trap receiver should listen to (::FFFF:0:0 -> all)",
                                "value": "::FFFF:0:0"
                            },
                            {
                                "name": "ipv6_port",
                                "description": "port trap receiver should bind to for ipv6 traps",
                                "value": "162"
                            }
                        ]
                    },
                    {
                        "name": "Cache",
                        "description": "Cache parameters",
                        "sourced_at_deployment": false,
                        "designer_editable": false,
                        "policy_editable": false,
                        "value": [
                            {
                                "name": "dns_cache_ttl_seconds",
                                "description": "dns cache ttl in seconds",
                                "value": "60"
                            }
                        ]
                    },
                    {
                        "name": "Files",
                        "description": "Files parameters",
                        "sourced_at_deployment": false,
                        "designer_editable": false,
                        "policy_editable": false,
                        "value": [
                            {
                                "name": "arriving_traps_log",
                                "description": "log for all traps accepted by receiver",
                                "value": "snmptrapd_arriving_traps.log"
                            },
                            {
                                "name": "data_dir",
                                "description": "directory for published traps (json)",
                                "value": "data"
                            },
                            {
                                "name": "eelf_audit",
                                "description": "eelf audit log",
                                "value": "audit.log"
                            },
                            {
                                "name": "eelf_base_dir",
                                "description": "base directory for eelf logs",
                                "value": "/opt/app/snmptrap/logs"
                            },
                            {
                                "name": "eelf_debug",
                                "description": "eelf debug log",
                                "value": "debug.log"
                            },
                            {
                                "name": "eelf_error",
                                "description": "eelf error log",
                                "value": "error.log"
                            },
                            {
                                "name": "eelf_metrics",
                                "description": "eelf metrics log",
                                "value": "metrics.log"
                            },
                            {
                                "name": "log_dir",
                                "description": "logs directory",
                                "value": "logs"
                            },
                            {
                                "name": "minimum_severity_to_log",
                                "description": "minimun severity to log",
                                "value": "2"
                            },
                            {
                                "name": "perm_status_file",
                                "description": "permanent status log",
                                "value": "snmptrapd_status.log"
                            },
                            {
                                "name": "pid_dir",
                                "description": "directory for pid file",
                                "value": "tmp"
                            },
                            {
                                "name": "roll_frequency",
                                "description": "frequency of log file rolls",
                                "value": "hour"
                            },
                            {
                                "name": "runtime_base_dir",
                                "description": "base directory for runtime files",
                                "value": "hour"
                            },
                            {
                                "name": "snmptrapd_diag",
                                "description": "diagnostic program log",
                                "value": "snmptrapd_prog_diag.log"
                            },
                            {
                                "name": "traps_stats_log",
                                "description": "traps statistics log",
                                "value": "snmptrapd_stats.csv"
                            }
                        ]
                    },
                    {
                        "name": "Publisher",
                        "description": "Publisher parameters",
                        "sourced_at_deployment": false,
                        "designer_editable": false,
                        "policy_editable": false,
                        "value": [
                            {
                                "name": "http_milliseconds_between_retries",
                                "description": "milliseconds between publish retries",
                                "value": "750"
                            },
                            {
                                "name": "http_peer_publisher",
                                "description": "peer publisher",
                                "value": "unavailable"
                            },
                            {
                                "name": "http_primary_publisher",
                                "description": "primary publisher",
                                "value": "true"
                            },
                            {
                                "name": "http_retries",
                                "description": "retries for publish attempts",
                                "value": "3"
                            },
                            {
                                "name": "http_timeout_milliseconds",
                                "description": "milliseconds for publish timeout",
                                "value": "1500"
                            },
                            {
                                "name": "max_milliseconds_between_publishes",
                                "description": "max milliseconds between publishes",
                                "value": "10000"
                            },
                            {
                                "name": "max_traps_between_publishes",
                                "description": "max traps between publishes",
                                "value": "10"
                            }
                        ]
                    }
                ],
        "auxilary": {
                "healthcheck": {
                        "type": "docker",
                        "interval": "300s",
                        "timeout": "120s",
                        "script": "/opt/app/snmptrap/bin/healthcheck.sh"
                },
                "reconfigs": {
                        "dti": "/opt/app/snmptrap/bin/snmptrapd.sh reloadCfg"
                },
                "ports": [
                        "6162:162"
                ]
        },
        "artifacts": [
                {
                        "type": "docker image",
                        "uri": "nexus.onap.org:10001/snapshots/onap/org.onap.dcaegen2.collectors.snmptrap:1.4.0"
                }
        ]
}
